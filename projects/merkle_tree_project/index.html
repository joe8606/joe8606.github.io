<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Merkle trees in a blockchain system | Shang-Yi(Joe) Lin </title> <meta name="author" content="Shang-Yi(Joe) Lin"> <meta name="description" content="Efficient verification of blockchain transactions and data integrity using Merkle tree hashing."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%93%80%9B&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://joe8606.github.io/projects/merkle_tree_project/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Shang-Yi(Joe)</span> Lin </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Merkle trees in a blockchain system</h1> <p class="post-description">Efficient verification of blockchain transactions and data integrity using Merkle tree hashing.</p> </header> <article> <p>Blockchain technology, foundational to cryptocurrencies like Bitcoin, relies on a robust and efficient data structure to manage transactions. A core component of a blockchain is the block, which fundamentally consists of two main parts: the <strong>block header</strong> and the <strong>transaction list</strong>. While the block header contains crucial metadata such as the previous block hash, timestamp, difficulty target, and nonce for proof of work, it also importantly includes the <strong>Merkle root</strong>, which serves to summarize all transactions within that block. The transaction list, conversely, enumerates all transactions contained within the block, commencing with the coinbase transaction that rewards the miner. A significant challenge in managing these blocks arises when considering the scale of transactions.</p> <h2 id="the-fundamental-problem-verification-efficiency-and-storage-optimization">The Fundamental Problem: Verification Efficiency and Storage Optimization</h2> <p>Imagine a blockchain block containing thousands of transactions. Without an efficient organizational method, verifying a single transaction would necessitate downloading and checking every single transaction within that block. This approach is highly inefficient in terms of computational resources and time. This inefficiency underscores a fundamental problem in blockchain systems: <strong>how to verify transaction integrity and presence quickly and efficiently without demanding excessive computational load or storage from every participant</strong>.</p> <h2 id="the-merkle-tree-solution-a-hierarchical-approach">The Merkle Tree Solution: A Hierarchical Approach</h2> <p>This fundamental problem is precisely what the Merkle tree is designed to solve. A Merkle tree effectively organizes transactions into a hierarchical tree structure. This structure allows for the verification of individual transactions or subsets of transactions by requiring only a small portion of the data, specifically the Merkle root and a few relevant hash values. Consequently, the verification process becomes significantly faster and more storage-efficient.</p> <h2 id="how-merkle-trees-work">How Merkle Trees Work</h2> <p>The construction of a Merkle tree is a systematic process. Each individual transaction (e.g., T1 to T10) is first hashed to generate a corresponding leaf node. These leaf nodes are then paired and hashed together to form parent nodes. This hierarchical process of pairing and hashing continues upwards through the tree until a single, final hash, known as the <strong>Merkle root</strong>, is produced at the top. This Merkle root comprehensively summarizes all transactions within the block and is subsequently stored within the block header. A critical feature of this structure is its integrity: if even a single transaction (e.g., T1) is altered, it will affect the entire tree structure and update the Merkle root hash, thereby ensuring data integrity across the block.</p> <p><img src="/assets/img/merkle_tree_diagram.png" alt="Merkle Tree Structure" style="width:75%; display:block; margin:auto;"></p> <h2 id="the-role-of-sha-256-hashing">The Role of SHA-256 Hashing</h2> <p>The integrity and security of the Merkle tree are underpinned by the hashing function employed. In blockchain systems like Bitcoin, the <strong>SHA-256</strong> (Secure Hash Algorithm 256-bit) cryptographic hash function is widely used. SHA-256 possesses three key properties that make it ideal for this application:</p> <ul> <li> <strong>Fixed Output Size:</strong> Regardless of the input data’s size, SHA-256 consistently produces a hash output of a fixed 256 bits.</li> <li> <strong>Collision Resistance:</strong> It is computationally infeasible to discover two different inputs that produce the exact same hash output.</li> <li> <strong>One-Way Function:</strong> It is almost impossible to reverse engineer the original input data from its hash value.</li> </ul> <p>These properties ensure that any minor change in transaction data results in a completely different Merkle root, immediately signaling a discrepancy.</p> <p><img src="/assets/img/merkle_tree_SHA.png" alt="SHA" style="width:75%; display:block; margin:auto;"></p> <h2 id="space-optimization-and-simplified-payment-verification-spv">Space Optimization and Simplified Payment Verification (SPV)</h2> <p>One of the significant benefits of the Merkle tree is its contribution to storage optimization. Once transactions are deeply embedded within a block and effectively “buried,” the detailed transaction data itself can be removed from a node’s storage. Crucially, the Merkle root, which encapsulates the integrity of these transactions, remains stored in the block header. To verify the existence and integrity of a single transaction at a later point, only a few specific branches of the Merkle tree are needed, rather than the entire transaction list. This approach saves considerable storage space while still definitively proving the transaction’s inclusion and validity. This mechanism is particularly vital for enabling <strong>Simplified Payment Verification (SPV)</strong>, which allows lightweight nodes to efficiently verify transactions without the necessity of downloading and storing the entire blockchain.</p> <h2 id="transaction-verification-process">Transaction Verification Process</h2> <p>The process of verifying a transaction using a Merkle tree is elegant. To verify a specific transaction, it is first hashed. Then, using its corresponding proof (a set of sibling hashes from the Merkle path), the Merkle root is reconstructed. If this newly reconstructed Merkle root precisely matches the Merkle root already stored in the block header, the transaction is confirmed as valid and included in that block.</p> <h2 id="conclusion">Conclusion</h2> <p>In summary, Merkle trees are an indispensable data structure in blockchain systems, widely implemented in networks like Bitcoin. They fundamentally address the challenges of transaction integrity, verification efficiency, and scalability by allowing for rapid and secure validation of transactions with minimal data transfer and storage requirements. Beyond blockchain, their utility extends to distributed storage systems for efficient data verification. The ingenious design of the Merkle tree has proven to be a cornerstone for robust and decentralized digital ledgers.</p> <hr> <h2 id="further-reading--video">Further Reading / Video</h2> <p><a href="https://youtu.be/YV5rhi04aqs?si=bHbwhYCFXuzU1HHF" rel="external nofollow noopener" target="_blank">Video: Merkle Trees Explained</a></p> <p><a href="https://github.com/joe8606/merkle_tree/blob/main/merkle_tree_demo.ipynb" rel="external nofollow noopener" target="_blank">Demo Notebook: Merkle Tree Python Demo</a></p> </article> <h2>References</h2> <div class="publications"> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Shang-Yi(Joe) Lin. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: July 29, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>